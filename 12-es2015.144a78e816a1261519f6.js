(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{DPn5:function(t,e,r){"use strict";var s=r("dNgK"),o=r("fXoL"),n=r("ofXK");function i(t,e){if(1&t&&(o.Zb(0,"div",3),o.Zb(1,"p",4),o.Fc(2),o.Yb(),o.Yb()),2&t){const t=o.lc();o.Jb(2),o.Gc(null==t.dialogData?null:t.dialogData.message)}}function a(t,e){if(1&t&&(o.Zb(0,"div",5),o.Zb(1,"p",6),o.Fc(2),o.Yb(),o.Yb()),2&t){const t=o.lc();o.Jb(2),o.Gc(null==t.dialogData?null:t.dialogData.message)}}function c(t,e){if(1&t&&(o.Zb(0,"div",7),o.Zb(1,"p",8),o.Fc(2),o.Yb(),o.Yb()),2&t){const t=o.lc();o.Jb(2),o.Gc(null==t.dialogData?null:t.dialogData.message)}}let l=(()=>{class t{constructor(t){this.data=t,this.dialogData=t}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(o.Ub(s.a))},t.\u0275cmp=o.Ob({type:t,selectors:[["app-snackbar"]],decls:3,vars:3,consts:[["class","toaster toaster-success",4,"ngIf"],["class","toaster toaster-danger",4,"ngIf"],["class","toaster toaster-warning",4,"ngIf"],[1,"toaster","toaster-success"],[1,"text-success","mb-0"],[1,"toaster","toaster-danger"],[1,"text-danger","mb-0"],[1,"toaster","toaster-warning"],[1,"text-warning","mb-0"]],template:function(t,e){1&t&&(o.Ec(0,i,3,1,"div",0),o.Ec(1,a,3,1,"div",1),o.Ec(2,c,3,1,"div",2)),2&t&&(o.qc("ngIf",e.dialogData&&e.dialogData.message&&"success"===e.dialogData.type),o.Jb(1),o.qc("ngIf",e.dialogData&&e.dialogData.message&&"danger"===e.dialogData.type),o.Jb(1),o.qc("ngIf",e.dialogData&&e.dialogData.message&&"warning"===e.dialogData.type))},directives:[n.l],styles:[".toaster[_ngcontent-%COMP%]{border-radius:8px;padding:14px 16px;min-height:48px}.toaster-success[_ngcontent-%COMP%]{border:2px solid #28a745}.toaster-warning[_ngcontent-%COMP%]{border:2px solid #ffc107}.toaster-danger[_ngcontent-%COMP%]{border:2px solid #dc3545}.toaster[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0;font-weight:500}"]}),t})();r.d(e,"a",(function(){return b}));let b=(()=>{class t{constructor(t){this.snackBar=t}openSnackBar(t){this.snackBar.openFromComponent(l,{data:t})}}return t.\u0275fac=function(e){return new(e||t)(o.dc(s.c))},t.\u0275prov=o.Qb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},M0ap:function(t,e,r){"use strict";r.r(e);var s=r("ofXK"),o=r("3Pt+"),n=r("tyNb"),i=r("fXoL"),a=r("7dP1"),c=r("jhN1"),l=r("DPn5"),b=r("qFpe");let d=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Ob({type:t,selectors:[["app-header"]],decls:12,vars:0,consts:[[1,"header","bg-gradient-primary","py-5","py-lg-5"],[1,"container"],[1,"header-body","text-center","mb-7"],[1,"row","justify-content-center"],[1,"col-lg-5","col-md-6"],[1,"text-white"],[1,"text-lead","text-white"],[1,"separator","separator-bottom","separator-skew","zindex-100"],["x","0","y","0","viewBox","0 0 2560 100","preserveAspectRatio","none","version","1.1","xmlns","http://www.w3.org/2000/svg"],["points","2560 0 2560 100 0 100",1,"fill-default"]],template:function(t,e){1&t&&(i.Zb(0,"div",0),i.Zb(1,"div",1),i.Zb(2,"div",2),i.Zb(3,"div",3),i.Zb(4,"div",4),i.Zb(5,"h1",5),i.Fc(6,"Welcome!"),i.Yb(),i.Zb(7,"p",6),i.Fc(8,"License Management System By IMS Software."),i.Yb(),i.Yb(),i.Yb(),i.Yb(),i.Yb(),i.Zb(9,"div",7),i.kc(),i.Zb(10,"svg",8),i.Vb(11,"polygon",9),i.Yb(),i.Yb(),i.Yb())},styles:[""]}),t})();var u=r("wd/R");let g=(()=>{class t{constructor(){}ngOnInit(){this.year=u().format("YYYY")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Ob({type:t,selectors:[["app-footer"]],decls:8,vars:1,consts:[[1,"py-5"],[1,"container"],[1,"row","align-items-center","justify-content-center"],[1,"col-xl-12"],[1,"copyright","text-center","text-muted"],["href","http://imssoftware.com.np","target","_blank",1,"font-weight-bold","text-white","ml-1"]],template:function(t,e){1&t&&(i.Zb(0,"footer",0),i.Zb(1,"div",1),i.Zb(2,"div",2),i.Zb(3,"div",3),i.Zb(4,"div",4),i.Fc(5),i.Zb(6,"a",5),i.Fc(7,"IMS Software Pvt. Ltd."),i.Yb(),i.Yb(),i.Yb(),i.Yb(),i.Yb(),i.Yb()),2&t&&(i.Jb(5),i.Hc(" \xa9 ",e.year," "))},styles:[""]}),t})();function f(t,e){if(1&t&&(i.Zb(0,"div",21),i.Fc(1),i.Yb()),2&t){const t=i.lc();i.Jb(1),i.Gc(t.errorMessage)}}function m(t,e){1&t&&(i.Zb(0,"small"),i.Fc(1,"Username is required."),i.Yb())}function p(t,e){if(1&t&&(i.Zb(0,"div",22),i.Ec(1,m,2,0,"small",23),i.Yb()),2&t){const t=i.lc();i.Jb(1),i.qc("ngIf",t.form.controls.username.errors.required)}}function h(t,e){1&t&&(i.Zb(0,"small"),i.Fc(1,"Username is required."),i.Yb())}function v(t,e){if(1&t&&(i.Zb(0,"div",22),i.Ec(1,h,2,0,"small",23),i.Yb()),2&t){const t=i.lc();i.Jb(1),i.qc("ngIf",t.form.controls.username.errors.required)}}function w(t,e){1&t&&(i.Zb(0,"small"),i.Fc(1,"Password is required."),i.Yb())}function Y(t,e){1&t&&(i.Zb(0,"small"),i.Fc(1,"Password must be at least 3 characters."),i.Yb())}function Z(t,e){1&t&&(i.Zb(0,"small"),i.Fc(1,"Password must be less than 12 characters."),i.Yb())}function y(t,e){if(1&t&&(i.Zb(0,"div",22),i.Ec(1,w,2,0,"small",23),i.Ec(2,Y,2,0,"small",23),i.Ec(3,Z,2,0,"small",23),i.Yb()),2&t){const t=i.lc();i.Jb(1),i.qc("ngIf",t.form.controls.password.errors.required),i.Jb(1),i.qc("ngIf",t.form.controls.password.errors.minlength),i.Jb(1),i.qc("ngIf",t.form.controls.password.errors.maxlength)}}function S(t,e){1&t&&(i.Zb(0,"small"),i.Fc(1,"Password is required."),i.Yb())}function I(t,e){1&t&&(i.Zb(0,"small"),i.Fc(1,"Password must be at least 3 characters."),i.Yb())}function x(t,e){1&t&&(i.Zb(0,"small"),i.Fc(1,"Password must be less than 12 characters."),i.Yb())}function q(t,e){if(1&t&&(i.Zb(0,"div",22),i.Ec(1,S,2,0,"small",23),i.Ec(2,I,2,0,"small",23),i.Ec(3,x,2,0,"small",23),i.Yb()),2&t){const t=i.lc();i.Jb(1),i.qc("ngIf",t.form.controls.password.errors.required),i.Jb(1),i.qc("ngIf",t.form.controls.password.errors.minlength),i.Jb(1),i.qc("ngIf",t.form.controls.password.errors.maxlength)}}function J(t,e){1&t&&i.Vb(0,"div",24)}const F=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:(()=>{class t{constructor(t,e,r,s,o,n){this.router=t,this.fb=e,this.authService=r,this.title=s,this.snackBarService=o,this.scrollHelper=n,this.isSubmitting=!1,this.isLoader=!1,this.errors=[],this.isSubmitted=!1,this.title.setTitle("Login | License Management System")}ngOnInit(){this.fbInit(),this.authService.loginReceived.subscribe(this.loginResponse.bind(this)),this.authService.loginError.subscribe(this.loginError.bind(this))}ngAfterViewChecked(){this.scrollHelper.doScroll()}fbInit(){this.form=this.fb.group({username:["",[o.u.required]],password:["",[o.u.required,o.u.minLength(3),o.u.maxLength(24)]]})}submit(t){if(!this.form.valid)return this.isSubmitting=!0,void this.scrollHelper.scrollToFirst("invalid-feedback");this.isSubmitted||(this.isLoader=!0,this.isSubmitted=!0,this.resetErrors(),this.authService.login(t))}loginResponse(t){this.tokenData=t,this.authService.getProfile(t).subscribe(t=>{t?(this.isLoader=!1,this.profileData=t.result,this.authService.setUserData(this.tokenData,this.profileData),this.snackBarService.openSnackBar({type:"success",message:"Successfully Logged In !"}),this.router.navigate(["/dashboard"])):(this.isLoader=!1,this.errorMessage="Invalid username / password.",this.scrollHelper.scrollToFirst("alert-danger"))},t=>{this.loginError(t)})}loginError(t){if(this.isSubmitted=!1,this.isLoader=!1,this.isSubmitting=!1,t&&401===t.status){this.errorMessage=t.error.error_description?t.error.error_description:"Please contact admin to verify your account.",this.scrollHelper.scrollToFirst("alert-danger");const e=this;setTimeout(()=>{e.errorMessage=void 0},3e3)}else{this.errorMessage="Invalid username / password.",this.scrollHelper.scrollToFirst("alert-danger");const t=this;setTimeout(()=>{t.errorMessage=void 0},3e3)}}resetErrors(){this.errorMessage=void 0,this.errors=[]}}return t.\u0275fac=function(e){return new(e||t)(i.Ub(n.f),i.Ub(o.d),i.Ub(a.a),i.Ub(c.c),i.Ub(l.a),i.Ub(b.a))},t.\u0275cmp=i.Ob({type:t,selectors:[["app-login"]],decls:33,vars:8,consts:[[1,"container","mt--8","pb-5"],[1,"row","justify-content-center"],[1,"col-lg-5","col-md-7"],[1,"card"],[1,"card-body","px-lg-5","py-lg-5"],[1,"text-center","text-muted","mb-4"],[3,"formGroup","ngSubmit"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"form-group","mb-3"],[1,"input-group","input-group-alternative"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"ni","ni-email-83"],["placeholder","username","type","text","formControlName","username",1,"form-control"],["class","invalid-feedback d-block",4,"ngIf"],[1,"form-group"],[1,"ni","ni-lock-circle-open"],["placeholder","**********","type","password","formControlName","password",1,"form-control"],[1,"text-center","d-flex","justify-content-center","align-items-center"],["type","submit",1,"btn","btn-primary","d-flex","justify-content-center","align-items-center","my-4",2,"width","120px",3,"disabled"],["class","preloader",4,"ngIf"],["role","alert",1,"alert","alert-danger"],[1,"invalid-feedback","d-block"],[4,"ngIf"],[1,"preloader"]],template:function(t,e){1&t&&(i.Vb(0,"app-header"),i.Zb(1,"div",0),i.Zb(2,"div",1),i.Zb(3,"div",2),i.Zb(4,"div",3),i.Zb(5,"div",4),i.Zb(6,"div",5),i.Zb(7,"small"),i.Fc(8,"Sign in with credentials"),i.Yb(),i.Yb(),i.Zb(9,"form",6),i.hc("ngSubmit",(function(t){return e.submit(e.form.value)})),i.Ec(10,f,2,1,"div",7),i.Zb(11,"div",8),i.Zb(12,"div",9),i.Zb(13,"div",10),i.Zb(14,"span",11),i.Vb(15,"i",12),i.Yb(),i.Yb(),i.Vb(16,"input",13),i.Yb(),i.Ec(17,p,2,1,"div",14),i.Ec(18,v,2,1,"div",14),i.Yb(),i.Zb(19,"div",15),i.Zb(20,"div",9),i.Zb(21,"div",10),i.Zb(22,"span",11),i.Vb(23,"i",16),i.Yb(),i.Yb(),i.Vb(24,"input",17),i.Yb(),i.Ec(25,y,4,3,"div",14),i.Ec(26,q,4,3,"div",14),i.Yb(),i.Zb(27,"div",18),i.Zb(28,"button",19),i.Zb(29,"span"),i.Fc(30,"Sign in"),i.Yb(),i.Ec(31,J,1,0,"div",20),i.Yb(),i.Yb(),i.Yb(),i.Yb(),i.Yb(),i.Yb(),i.Yb(),i.Yb(),i.Vb(32,"app-footer")),2&t&&(i.Jb(9),i.qc("formGroup",e.form),i.Jb(1),i.qc("ngIf",e.errorMessage),i.Jb(7),i.qc("ngIf",!e.isSubmitting&&e.form.controls.username.invalid&&(e.form.controls.username.dirty||e.form.controls.username.touched)),i.Jb(1),i.qc("ngIf",e.isSubmitting&&e.form.controls.username.invalid),i.Jb(7),i.qc("ngIf",!e.isSubmitting&&e.form.controls.password.invalid&&(e.form.controls.password.dirty||e.form.controls.password.touched)),i.Jb(1),i.qc("ngIf",e.isSubmitting&&e.form.controls.password.invalid),i.Jb(2),i.qc("disabled",e.isSubmitted),i.Jb(3),i.qc("ngIf",e.isLoader))},directives:[d,o.w,o.o,o.h,s.l,o.c,o.n,o.g,g],styles:[""]}),t})()}];let D=(()=>{class t{}return t.\u0275mod=i.Sb({type:t}),t.\u0275inj=i.Rb({factory:function(e){return new(e||t)},imports:[[n.j.forChild(F)],n.j]}),t})();r.d(e,"SigninModule",(function(){return E}));let E=(()=>{class t{}return t.\u0275mod=i.Sb({type:t}),t.\u0275inj=i.Rb({factory:function(e){return new(e||t)},imports:[[s.b,D,o.j,o.s]]}),t})()}}]);