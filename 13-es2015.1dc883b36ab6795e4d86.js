(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{M0ap:function(e,r,t){"use strict";t.r(r);var s=t("ofXK"),i=t("3Pt+"),o=t("tyNb"),n=t("fXoL"),c=t("7dP1"),a=t("jhN1"),l=t("DPn5"),b=t("qFpe");let d=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=n.Ob({type:e,selectors:[["app-header"]],decls:12,vars:0,consts:[[1,"header","bg-gradient-primary","py-5","py-lg-5"],[1,"container"],[1,"header-body","text-center","mb-7"],[1,"row","justify-content-center"],[1,"col-lg-5","col-md-6"],[1,"text-white"],[1,"text-lead","text-white"],[1,"separator","separator-bottom","separator-skew","zindex-100"],["x","0","y","0","viewBox","0 0 2560 100","preserveAspectRatio","none","version","1.1","xmlns","http://www.w3.org/2000/svg"],["points","2560 0 2560 100 0 100",1,"fill-default"]],template:function(e,r){1&e&&(n.Zb(0,"div",0),n.Zb(1,"div",1),n.Zb(2,"div",2),n.Zb(3,"div",3),n.Zb(4,"div",4),n.Zb(5,"h1",5),n.Gc(6,"Welcome!"),n.Yb(),n.Zb(7,"p",6),n.Gc(8,"License Management System By IMS Software."),n.Yb(),n.Yb(),n.Yb(),n.Yb(),n.Yb(),n.Zb(9,"div",7),n.kc(),n.Zb(10,"svg",8),n.Vb(11,"polygon",9),n.Yb(),n.Yb(),n.Yb())},styles:[""]}),e})();var u=t("wd/R");let m=(()=>{class e{constructor(){}ngOnInit(){this.year=u().format("YYYY")}}return e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=n.Ob({type:e,selectors:[["app-footer"]],decls:8,vars:1,consts:[[1,"py-5"],[1,"container"],[1,"row","align-items-center","justify-content-center"],[1,"col-xl-12"],[1,"copyright","text-center","text-muted"],["href","http://imssoftware.com.np","target","_blank",1,"font-weight-bold","text-white","ml-1"]],template:function(e,r){1&e&&(n.Zb(0,"footer",0),n.Zb(1,"div",1),n.Zb(2,"div",2),n.Zb(3,"div",3),n.Zb(4,"div",4),n.Gc(5),n.Zb(6,"a",5),n.Gc(7,"IMS Software Pvt. Ltd."),n.Yb(),n.Yb(),n.Yb(),n.Yb(),n.Yb(),n.Yb()),2&e&&(n.Jb(5),n.Ic(" \xa9 ",r.year," "))},styles:[""]}),e})();function f(e,r){if(1&e&&(n.Zb(0,"div",21),n.Gc(1),n.Yb()),2&e){const e=n.lc();n.Jb(1),n.Hc(e.errorMessage)}}function p(e,r){1&e&&(n.Zb(0,"small"),n.Gc(1,"Username is required."),n.Yb())}function h(e,r){if(1&e&&(n.Zb(0,"div",22),n.Fc(1,p,2,0,"small",23),n.Yb()),2&e){const e=n.lc();n.Jb(1),n.qc("ngIf",e.form.controls.username.errors.required)}}function g(e,r){1&e&&(n.Zb(0,"small"),n.Gc(1,"Username is required."),n.Yb())}function v(e,r){if(1&e&&(n.Zb(0,"div",22),n.Fc(1,g,2,0,"small",23),n.Yb()),2&e){const e=n.lc();n.Jb(1),n.qc("ngIf",e.form.controls.username.errors.required)}}function w(e,r){1&e&&(n.Zb(0,"small"),n.Gc(1,"Password is required."),n.Yb())}function Y(e,r){1&e&&(n.Zb(0,"small"),n.Gc(1,"Password must be at least 3 characters."),n.Yb())}function Z(e,r){1&e&&(n.Zb(0,"small"),n.Gc(1,"Password must be less than 12 characters."),n.Yb())}function y(e,r){if(1&e&&(n.Zb(0,"div",22),n.Fc(1,w,2,0,"small",23),n.Fc(2,Y,2,0,"small",23),n.Fc(3,Z,2,0,"small",23),n.Yb()),2&e){const e=n.lc();n.Jb(1),n.qc("ngIf",e.form.controls.password.errors.required),n.Jb(1),n.qc("ngIf",e.form.controls.password.errors.minlength),n.Jb(1),n.qc("ngIf",e.form.controls.password.errors.maxlength)}}function S(e,r){1&e&&(n.Zb(0,"small"),n.Gc(1,"Password is required."),n.Yb())}function I(e,r){1&e&&(n.Zb(0,"small"),n.Gc(1,"Password must be at least 3 characters."),n.Yb())}function q(e,r){1&e&&(n.Zb(0,"small"),n.Gc(1,"Password must be less than 12 characters."),n.Yb())}function x(e,r){if(1&e&&(n.Zb(0,"div",22),n.Fc(1,S,2,0,"small",23),n.Fc(2,I,2,0,"small",23),n.Fc(3,q,2,0,"small",23),n.Yb()),2&e){const e=n.lc();n.Jb(1),n.qc("ngIf",e.form.controls.password.errors.required),n.Jb(1),n.qc("ngIf",e.form.controls.password.errors.minlength),n.Jb(1),n.qc("ngIf",e.form.controls.password.errors.maxlength)}}function J(e,r){1&e&&n.Vb(0,"div",24)}const F=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:(()=>{class e{constructor(e,r,t,s,i,o){this.router=e,this.fb=r,this.authService=t,this.title=s,this.snackBarService=i,this.scrollHelper=o,this.isSubmitting=!1,this.isLoader=!1,this.errors=[],this.isSubmitted=!1,this.title.setTitle("Login | License Management System")}ngOnInit(){this.fbInit(),this.authService.loginReceived.subscribe(this.loginResponse.bind(this)),this.authService.loginError.subscribe(this.loginError.bind(this))}ngAfterViewChecked(){this.scrollHelper.doScroll()}fbInit(){this.form=this.fb.group({username:["",[i.v.required]],password:["",[i.v.required,i.v.minLength(3),i.v.maxLength(24)]]})}submit(e){if(!this.form.valid)return this.isSubmitting=!0,void this.scrollHelper.scrollToFirst("invalid-feedback");this.isSubmitted||(this.isLoader=!0,this.isSubmitted=!0,this.resetErrors(),this.authService.login(e))}loginResponse(e){this.tokenData=e,this.authService.getProfile(e).subscribe(e=>{e?(this.isLoader=!1,this.profileData=e.result,this.authService.setUserData(this.tokenData,this.profileData),this.snackBarService.openSnackBar({type:"success",message:"Successfully Logged In !"}),this.router.navigate(["/dashboard"])):(this.isLoader=!1,this.errorMessage="Invalid username / password.",this.scrollHelper.scrollToFirst("alert-danger"))},e=>{this.loginError(e)})}loginError(e){if(this.isSubmitted=!1,this.isLoader=!1,this.isSubmitting=!1,e&&401===e.status){this.errorMessage=e.error.error_description?e.error.error_description:"Please contact admin to verify your account.",this.scrollHelper.scrollToFirst("alert-danger");const r=this;setTimeout(()=>{r.errorMessage=void 0},3e3)}else{this.errorMessage="Invalid username / password.",this.scrollHelper.scrollToFirst("alert-danger");const e=this;setTimeout(()=>{e.errorMessage=void 0},3e3)}}resetErrors(){this.errorMessage=void 0,this.errors=[]}}return e.\u0275fac=function(r){return new(r||e)(n.Ub(o.f),n.Ub(i.d),n.Ub(c.a),n.Ub(a.c),n.Ub(l.a),n.Ub(b.a))},e.\u0275cmp=n.Ob({type:e,selectors:[["app-login"]],decls:33,vars:8,consts:[[1,"container","mt--8","pb-5"],[1,"row","justify-content-center"],[1,"col-lg-5","col-md-7"],[1,"card"],[1,"card-body","px-lg-5","py-lg-5"],[1,"text-center","text-muted","mb-4"],[3,"formGroup","ngSubmit"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"form-group","mb-3"],[1,"input-group","input-group-alternative"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"ni","ni-email-83"],["placeholder","username","type","text","formControlName","username",1,"form-control"],["class","invalid-feedback d-block",4,"ngIf"],[1,"form-group"],[1,"ni","ni-lock-circle-open"],["placeholder","**********","type","password","formControlName","password",1,"form-control"],[1,"text-center","d-flex","justify-content-center","align-items-center"],["type","submit",1,"btn","btn-primary","d-flex","justify-content-center","align-items-center","my-4",2,"width","120px",3,"disabled"],["class","preloader",4,"ngIf"],["role","alert",1,"alert","alert-danger"],[1,"invalid-feedback","d-block"],[4,"ngIf"],[1,"preloader"]],template:function(e,r){1&e&&(n.Vb(0,"app-header"),n.Zb(1,"div",0),n.Zb(2,"div",1),n.Zb(3,"div",2),n.Zb(4,"div",3),n.Zb(5,"div",4),n.Zb(6,"div",5),n.Zb(7,"small"),n.Gc(8,"Sign in with credentials"),n.Yb(),n.Yb(),n.Zb(9,"form",6),n.hc("ngSubmit",(function(e){return r.submit(r.form.value)})),n.Fc(10,f,2,1,"div",7),n.Zb(11,"div",8),n.Zb(12,"div",9),n.Zb(13,"div",10),n.Zb(14,"span",11),n.Vb(15,"i",12),n.Yb(),n.Yb(),n.Vb(16,"input",13),n.Yb(),n.Fc(17,h,2,1,"div",14),n.Fc(18,v,2,1,"div",14),n.Yb(),n.Zb(19,"div",15),n.Zb(20,"div",9),n.Zb(21,"div",10),n.Zb(22,"span",11),n.Vb(23,"i",16),n.Yb(),n.Yb(),n.Vb(24,"input",17),n.Yb(),n.Fc(25,y,4,3,"div",14),n.Fc(26,x,4,3,"div",14),n.Yb(),n.Zb(27,"div",18),n.Zb(28,"button",19),n.Zb(29,"span"),n.Gc(30,"Sign in"),n.Yb(),n.Fc(31,J,1,0,"div",20),n.Yb(),n.Yb(),n.Yb(),n.Yb(),n.Yb(),n.Yb(),n.Yb(),n.Yb(),n.Vb(32,"app-footer")),2&e&&(n.Jb(9),n.qc("formGroup",r.form),n.Jb(1),n.qc("ngIf",r.errorMessage),n.Jb(7),n.qc("ngIf",!r.isSubmitting&&r.form.controls.username.invalid&&(r.form.controls.username.dirty||r.form.controls.username.touched)),n.Jb(1),n.qc("ngIf",r.isSubmitting&&r.form.controls.username.invalid),n.Jb(7),n.qc("ngIf",!r.isSubmitting&&r.form.controls.password.invalid&&(r.form.controls.password.dirty||r.form.controls.password.touched)),n.Jb(1),n.qc("ngIf",r.isSubmitting&&r.form.controls.password.invalid),n.Jb(2),n.qc("disabled",r.isSubmitted),n.Jb(3),n.qc("ngIf",r.isLoader))},directives:[d,i.x,i.o,i.h,s.l,i.c,i.n,i.g,m],styles:[""]}),e})()}];let k=(()=>{class e{}return e.\u0275mod=n.Sb({type:e}),e.\u0275inj=n.Rb({factory:function(r){return new(r||e)},imports:[[o.j.forChild(F)],o.j]}),e})();t.d(r,"SigninModule",(function(){return G}));let G=(()=>{class e{}return e.\u0275mod=n.Sb({type:e}),e.\u0275inj=n.Rb({factory:function(r){return new(r||e)},imports:[[s.b,k,i.j,i.t]]}),e})()}}]);