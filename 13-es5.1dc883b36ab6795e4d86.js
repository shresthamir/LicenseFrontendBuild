function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,r){for(var t=0;t<r.length;t++){var i=r[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{M0ap:function(e,r,t){"use strict";t.r(r);var i,s,n=t("ofXK"),o=t("3Pt+"),a=t("tyNb"),c=t("fXoL"),l=t("7dP1"),b=t("jhN1"),u=t("DPn5"),d=t("qFpe"),f=((i=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||i)},i.\u0275cmp=c.Ob({type:i,selectors:[["app-header"]],decls:12,vars:0,consts:[[1,"header","bg-gradient-primary","py-5","py-lg-5"],[1,"container"],[1,"header-body","text-center","mb-7"],[1,"row","justify-content-center"],[1,"col-lg-5","col-md-6"],[1,"text-white"],[1,"text-lead","text-white"],[1,"separator","separator-bottom","separator-skew","zindex-100"],["x","0","y","0","viewBox","0 0 2560 100","preserveAspectRatio","none","version","1.1","xmlns","http://www.w3.org/2000/svg"],["points","2560 0 2560 100 0 100",1,"fill-default"]],template:function(e,r){1&e&&(c.Zb(0,"div",0),c.Zb(1,"div",1),c.Zb(2,"div",2),c.Zb(3,"div",3),c.Zb(4,"div",4),c.Zb(5,"h1",5),c.Gc(6,"Welcome!"),c.Yb(),c.Zb(7,"p",6),c.Gc(8,"License Management System By IMS Software."),c.Yb(),c.Yb(),c.Yb(),c.Yb(),c.Yb(),c.Zb(9,"div",7),c.kc(),c.Zb(10,"svg",8),c.Vb(11,"polygon",9),c.Yb(),c.Yb(),c.Yb())},styles:[""]}),i),m=t("wd/R"),p=((s=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){this.year=m().format("YYYY")}}]),e}()).\u0275fac=function(e){return new(e||s)},s.\u0275cmp=c.Ob({type:s,selectors:[["app-footer"]],decls:8,vars:1,consts:[[1,"py-5"],[1,"container"],[1,"row","align-items-center","justify-content-center"],[1,"col-xl-12"],[1,"copyright","text-center","text-muted"],["href","http://imssoftware.com.np","target","_blank",1,"font-weight-bold","text-white","ml-1"]],template:function(e,r){1&e&&(c.Zb(0,"footer",0),c.Zb(1,"div",1),c.Zb(2,"div",2),c.Zb(3,"div",3),c.Zb(4,"div",4),c.Gc(5),c.Zb(6,"a",5),c.Gc(7,"IMS Software Pvt. Ltd."),c.Yb(),c.Yb(),c.Yb(),c.Yb(),c.Yb(),c.Yb()),2&e&&(c.Jb(5),c.Ic(" \xa9 ",r.year," "))},styles:[""]}),s);function h(e,r){if(1&e&&(c.Zb(0,"div",21),c.Gc(1),c.Yb()),2&e){var t=c.lc();c.Jb(1),c.Hc(t.errorMessage)}}function g(e,r){1&e&&(c.Zb(0,"small"),c.Gc(1,"Username is required."),c.Yb())}function v(e,r){if(1&e&&(c.Zb(0,"div",22),c.Fc(1,g,2,0,"small",23),c.Yb()),2&e){var t=c.lc();c.Jb(1),c.qc("ngIf",t.form.controls.username.errors.required)}}function w(e,r){1&e&&(c.Zb(0,"small"),c.Gc(1,"Username is required."),c.Yb())}function y(e,r){if(1&e&&(c.Zb(0,"div",22),c.Fc(1,w,2,0,"small",23),c.Yb()),2&e){var t=c.lc();c.Jb(1),c.qc("ngIf",t.form.controls.username.errors.required)}}function Y(e,r){1&e&&(c.Zb(0,"small"),c.Gc(1,"Password is required."),c.Yb())}function Z(e,r){1&e&&(c.Zb(0,"small"),c.Gc(1,"Password must be at least 3 characters."),c.Yb())}function S(e,r){1&e&&(c.Zb(0,"small"),c.Gc(1,"Password must be less than 12 characters."),c.Yb())}function k(e,r){if(1&e&&(c.Zb(0,"div",22),c.Fc(1,Y,2,0,"small",23),c.Fc(2,Z,2,0,"small",23),c.Fc(3,S,2,0,"small",23),c.Yb()),2&e){var t=c.lc();c.Jb(1),c.qc("ngIf",t.form.controls.password.errors.required),c.Jb(1),c.qc("ngIf",t.form.controls.password.errors.minlength),c.Jb(1),c.qc("ngIf",t.form.controls.password.errors.maxlength)}}function I(e,r){1&e&&(c.Zb(0,"small"),c.Gc(1,"Password is required."),c.Yb())}function q(e,r){1&e&&(c.Zb(0,"small"),c.Gc(1,"Password must be at least 3 characters."),c.Yb())}function x(e,r){1&e&&(c.Zb(0,"small"),c.Gc(1,"Password must be less than 12 characters."),c.Yb())}function C(e,r){if(1&e&&(c.Zb(0,"div",22),c.Fc(1,I,2,0,"small",23),c.Fc(2,q,2,0,"small",23),c.Fc(3,x,2,0,"small",23),c.Yb()),2&e){var t=c.lc();c.Jb(1),c.qc("ngIf",t.form.controls.password.errors.required),c.Jb(1),c.qc("ngIf",t.form.controls.password.errors.minlength),c.Jb(1),c.qc("ngIf",t.form.controls.password.errors.maxlength)}}function J(e,r){1&e&&c.Vb(0,"div",24)}var F,G,P=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:(F=function(){function e(r,t,i,s,n,o){_classCallCheck(this,e),this.router=r,this.fb=t,this.authService=i,this.title=s,this.snackBarService=n,this.scrollHelper=o,this.isSubmitting=!1,this.isLoader=!1,this.errors=[],this.isSubmitted=!1,this.title.setTitle("Login | License Management System")}return _createClass(e,[{key:"ngOnInit",value:function(){this.fbInit(),this.authService.loginReceived.subscribe(this.loginResponse.bind(this)),this.authService.loginError.subscribe(this.loginError.bind(this))}},{key:"ngAfterViewChecked",value:function(){this.scrollHelper.doScroll()}},{key:"fbInit",value:function(){this.form=this.fb.group({username:["",[o.v.required]],password:["",[o.v.required,o.v.minLength(3),o.v.maxLength(24)]]})}},{key:"submit",value:function(e){if(!this.form.valid)return this.isSubmitting=!0,void this.scrollHelper.scrollToFirst("invalid-feedback");this.isSubmitted||(this.isLoader=!0,this.isSubmitted=!0,this.resetErrors(),this.authService.login(e))}},{key:"loginResponse",value:function(e){var r=this;this.tokenData=e,this.authService.getProfile(e).subscribe((function(e){e?(r.isLoader=!1,r.profileData=e.result,r.authService.setUserData(r.tokenData,r.profileData),r.snackBarService.openSnackBar({type:"success",message:"Successfully Logged In !"}),r.router.navigate(["/dashboard"])):(r.isLoader=!1,r.errorMessage="Invalid username / password.",r.scrollHelper.scrollToFirst("alert-danger"))}),(function(e){r.loginError(e)}))}},{key:"loginError",value:function(e){if(this.isSubmitted=!1,this.isLoader=!1,this.isSubmitting=!1,e&&401===e.status){this.errorMessage=e.error.error_description?e.error.error_description:"Please contact admin to verify your account.",this.scrollHelper.scrollToFirst("alert-danger");var r=this;setTimeout((function(){r.errorMessage=void 0}),3e3)}else{this.errorMessage="Invalid username / password.",this.scrollHelper.scrollToFirst("alert-danger");var t=this;setTimeout((function(){t.errorMessage=void 0}),3e3)}}},{key:"resetErrors",value:function(){this.errorMessage=void 0,this.errors=[]}}]),e}(),F.\u0275fac=function(e){return new(e||F)(c.Ub(a.f),c.Ub(o.d),c.Ub(l.a),c.Ub(b.c),c.Ub(u.a),c.Ub(d.a))},F.\u0275cmp=c.Ob({type:F,selectors:[["app-login"]],decls:33,vars:8,consts:[[1,"container","mt--8","pb-5"],[1,"row","justify-content-center"],[1,"col-lg-5","col-md-7"],[1,"card"],[1,"card-body","px-lg-5","py-lg-5"],[1,"text-center","text-muted","mb-4"],[3,"formGroup","ngSubmit"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"form-group","mb-3"],[1,"input-group","input-group-alternative"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"ni","ni-email-83"],["placeholder","username","type","text","formControlName","username",1,"form-control"],["class","invalid-feedback d-block",4,"ngIf"],[1,"form-group"],[1,"ni","ni-lock-circle-open"],["placeholder","**********","type","password","formControlName","password",1,"form-control"],[1,"text-center","d-flex","justify-content-center","align-items-center"],["type","submit",1,"btn","btn-primary","d-flex","justify-content-center","align-items-center","my-4",2,"width","120px",3,"disabled"],["class","preloader",4,"ngIf"],["role","alert",1,"alert","alert-danger"],[1,"invalid-feedback","d-block"],[4,"ngIf"],[1,"preloader"]],template:function(e,r){1&e&&(c.Vb(0,"app-header"),c.Zb(1,"div",0),c.Zb(2,"div",1),c.Zb(3,"div",2),c.Zb(4,"div",3),c.Zb(5,"div",4),c.Zb(6,"div",5),c.Zb(7,"small"),c.Gc(8,"Sign in with credentials"),c.Yb(),c.Yb(),c.Zb(9,"form",6),c.hc("ngSubmit",(function(e){return r.submit(r.form.value)})),c.Fc(10,h,2,1,"div",7),c.Zb(11,"div",8),c.Zb(12,"div",9),c.Zb(13,"div",10),c.Zb(14,"span",11),c.Vb(15,"i",12),c.Yb(),c.Yb(),c.Vb(16,"input",13),c.Yb(),c.Fc(17,v,2,1,"div",14),c.Fc(18,y,2,1,"div",14),c.Yb(),c.Zb(19,"div",15),c.Zb(20,"div",9),c.Zb(21,"div",10),c.Zb(22,"span",11),c.Vb(23,"i",16),c.Yb(),c.Yb(),c.Vb(24,"input",17),c.Yb(),c.Fc(25,k,4,3,"div",14),c.Fc(26,C,4,3,"div",14),c.Yb(),c.Zb(27,"div",18),c.Zb(28,"button",19),c.Zb(29,"span"),c.Gc(30,"Sign in"),c.Yb(),c.Fc(31,J,1,0,"div",20),c.Yb(),c.Yb(),c.Yb(),c.Yb(),c.Yb(),c.Yb(),c.Yb(),c.Yb(),c.Vb(32,"app-footer")),2&e&&(c.Jb(9),c.qc("formGroup",r.form),c.Jb(1),c.qc("ngIf",r.errorMessage),c.Jb(7),c.qc("ngIf",!r.isSubmitting&&r.form.controls.username.invalid&&(r.form.controls.username.dirty||r.form.controls.username.touched)),c.Jb(1),c.qc("ngIf",r.isSubmitting&&r.form.controls.username.invalid),c.Jb(7),c.qc("ngIf",!r.isSubmitting&&r.form.controls.password.invalid&&(r.form.controls.password.dirty||r.form.controls.password.touched)),c.Jb(1),c.qc("ngIf",r.isSubmitting&&r.form.controls.password.invalid),c.Jb(2),c.qc("disabled",r.isSubmitted),c.Jb(3),c.qc("ngIf",r.isLoader))},directives:[f,o.x,o.o,o.h,n.l,o.c,o.n,o.g,p],styles:[""]}),F)}],_=((G=function e(){_classCallCheck(this,e)}).\u0275mod=c.Sb({type:G}),G.\u0275inj=c.Rb({factory:function(e){return new(e||G)},imports:[[a.j.forChild(P)],a.j]}),G);t.d(r,"SigninModule",(function(){return L}));var M,L=((M=function e(){_classCallCheck(this,e)}).\u0275mod=c.Sb({type:M}),M.\u0275inj=c.Rb({factory:function(e){return new(e||M)},imports:[[n.b,_,o.j,o.t]]}),M)}}]);