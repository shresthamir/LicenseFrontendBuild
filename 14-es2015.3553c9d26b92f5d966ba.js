(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{BJHQ:function(e,t,i){"use strict";i.r(t);var r=i("ofXK"),s=i("3Pt+"),o=i("0IaG"),c=i("tyNb"),n=i("lJxs"),a=i("fXoL"),l=i("f4AX"),b=i("DPn5"),d=i("qFsG"),u=i("/1cH"),m=i("iIrt"),f=i("FKr1"),h=i("bSwM");function p(e,t){if(1&e&&(a.Zb(0,"div",3),a.Zb(1,"div",40),a.Zb(2,"div",41),a.Fc(3),a.Yb(),a.Yb(),a.Yb()),2&e){const e=a.lc();a.Jb(3),a.Gc(e.errorMessage)}}function g(e,t){if(1&e&&(a.Zb(0,"div",3),a.Zb(1,"div",40),a.Zb(2,"div",42),a.Fc(3),a.Yb(),a.Yb(),a.Yb()),2&e){const e=a.lc();a.Jb(3),a.Gc(e.successMessage)}}function v(e,t){1&e&&(a.Zb(0,"small"),a.Fc(1,"User Name is required."),a.Yb())}function Y(e,t){if(1&e&&(a.Zb(0,"div",43),a.Ec(1,v,2,0,"small",44),a.Yb()),2&e){const e=a.lc();a.Jb(1),a.qc("ngIf",e.form.controls.username.errors.required)}}function Z(e,t){1&e&&a.Vb(0,"input",45)}function w(e,t){1&e&&(a.Zb(0,"label",46),a.Fc(1,"Disabled"),a.Yb())}function y(e,t){1&e&&(a.Zb(0,"small"),a.Fc(1,"Email is required."),a.Yb())}function k(e,t){1&e&&(a.Zb(0,"small"),a.Fc(1,"Invalid Email address."),a.Yb())}function F(e,t){if(1&e&&(a.Zb(0,"div",43),a.Ec(1,y,2,0,"small",44),a.Ec(2,k,2,0,"small",44),a.Yb()),2&e){const e=a.lc();a.Jb(1),a.qc("ngIf",e.form.controls.email.errors.required),a.Jb(1),a.qc("ngIf",e.form.controls.email.errors.email)}}function L(e,t){if(1&e){const e=a.ac();a.Zb(0,"mat-option",47),a.Zb(1,"div",48),a.hc("click",(function(i){a.yc(e);const r=t.$implicit;return a.lc().optionClicked(i,r)})),a.Zb(2,"mat-checkbox",49),a.hc("change",(function(i){a.yc(e);const r=t.$implicit;return a.lc().toggleSelection(r)}))("click",(function(t){return a.yc(e),t.stopPropagation()})),a.Zb(3,"h4"),a.Fc(4),a.Yb(),a.Yb(),a.Zb(5,"p",50),a.Fc(6),a.Yb(),a.Yb(),a.Yb()}if(2&e){const e=t.$implicit,i=a.lc();a.qc("value",i.selectedRoles),a.Jb(2),a.qc("checked",e.selected),a.Jb(2),a.Gc(e.Role),a.Jb(2),a.Gc(e.Description)}}function x(e,t){1&e&&a.Vb(0,"div",51)}let J=(()=>{class e{constructor(e,t,i,r,o){this.fb=e,this.userService=t,this.snackBarService=i,this.route=r,this.router=o,this.selectedRoles=new Array,this.role=new s.e,this.isSubmitting=!1,this.isSubmitted=!1,this.isLoader=!1,this.isEdit=!1}ngOnInit(){this.forminit()}forminit(){this.form=this.fb.group({username:["",[s.w.required]],email:["",[s.w.required,s.w.email]],disabled:[!1],roles:[""]}),this.options=[],this.getRoles()}getRoles(){this.userService.getRoles().subscribe(e=>{this.options=e&&e.result?e.result:[],this.loadValues(),console.log(this.isEdit)},e=>{})}loadValues(){this.route.paramMap.pipe(Object(n.a)(()=>window.history.state)).subscribe(e=>{e.username&&(this.options.forEach(t=>{e.roles.map(e=>e.Role).indexOf(t.Role)>=0&&(t.selected=!0,this.selectedRoles.push(t))}),this.form.patchValue({username:e.username,email:e.email,roles:this.selectedRoles,disabled:e.Disabled}),this.isEdit=!0)})}submit(e){if(!this.form.valid)return void(this.isSubmitting=!0);let t;this.isSubmitted=!0,this.isLoader=!0,t=this.isEdit?this.userService.updateUser(e):this.userService.registerUser(e),t.subscribe(e=>{this.isSubmitted=!1,this.isLoader=!1,this.resetForm(),this.router.navigate(["/user/userList"]),this.snackBarService.openSnackBar({type:"success",message:e&&e.message?e.message:"Registration Successfull"})},e=>{this.isSubmitted=!1,this.isLoader=!1,e&&e.error&&(this.errorMessage=e.error.message?e.error.message:JSON.stringify(e.error));const t=this;setTimeout(()=>{t.errorMessage=void 0},5e3)})}resetForm(){this.form.reset()}displayFn(e){let t;return Array.isArray(e)?e.forEach((e,i)=>{0===i?t=e.Role:t+=", "+e.Role}):t=e,console.log(t,e,Array.isArray(e)),t}toggleSelection(e){if(console.log(e),e.selected=!e.selected,e.selected)this.selectedRoles.push(e);else{const t=this.selectedRoles.findIndex(t=>t.Role===e.Role);this.selectedRoles.splice(t,1)}this.form.controls.roles.setValue(this.selectedRoles)}optionClicked(e,t){e.stopPropagation(),this.toggleSelection(t)}}return e.\u0275fac=function(t){return new(t||e)(a.Ub(s.d),a.Ub(l.a),a.Ub(b.a),a.Ub(c.a),a.Ub(c.f))},e.\u0275cmp=a.Ob({type:e,selectors:[["app-user-register"]],decls:54,vars:13,consts:[[1,"header","bg-gradient-primary","pb-6","pt-4","pt-md-6"],[1,"container-fluid"],[1,"header-body"],[1,"row"],[1,"col-xl-12","col-lg-12","pb-3","pt-3"],["aria-label","breadcrumb",1,"nav-breadcrumb"],[1,"breadcrumb","mb-0"],[1,"breadcrumb-item"],["routerLink","/dashboard"],[1,"ni","ni-tv-2"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid","mt--7"],[1,"row","mt-5"],[1,"col-xl-12"],[1,"card","shadow"],[1,"card-header","border-0"],[1,"row","align-items-center"],[1,"col"],[1,"mb-0"],["class","row",4,"ngIf"],["autocomplete","off",1,"form-horizontal","form-material",2,"padding-left","20px",3,"formGroup","ngSubmit"],[1,"form-group","row","pt-2"],["for","userName",1,"col-md-2","fontweight"],[1,"col-md-4"],["type","text","placeholder","Enter User Name","id","userName","formControlName","username",1,"input"],["class","invalid-feedback d-block",4,"ngIf"],["id","disabled","type","checkbox","formControlName","disabled",4,"ngIf"],["for","disabled","class","col-md-2 fontweight",4,"ngIf"],["for","userEmail",1,"col-md-2","fontweight"],["type","text","placeholder","Enter Email Address","id","userEmail","formControlName","email",1,"input"],["for","userRole",1,"col-md-2","fontweight"],["type","text","placeholder","Enter Role","id","userRole","onkeydown","return false","formControlName","roles","matInput","",1,"input",3,"matAutocomplete"],[3,"displayWith"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[1,"form-group","row"],[1,"col-sm-12"],["type","submit",1,"btn","btn-success",2,"width","70px","margin-right","15px",3,"disabled"],["class","postloader",4,"ngIf"],["routerLink","/user/userList",1,"btn","btn-info"],[1,"col-12"],[1,"alert","alert-danger"],[1,"alert","alert-success"],[1,"invalid-feedback","d-block"],[4,"ngIf"],["id","disabled","type","checkbox","formControlName","disabled"],["for","disabled",1,"col-md-2","fontweight"],[3,"value"],[3,"click"],[3,"checked","change","click"],[2,"font-style","italic","font-size","small","margin-left","25px","margin-top","-20px"],[1,"postloader"]],template:function(e,t){if(1&e&&(a.Zb(0,"div",0),a.Zb(1,"div",1),a.Zb(2,"div",2),a.Zb(3,"div",3),a.Zb(4,"div",4),a.Zb(5,"nav",5),a.Zb(6,"ol",6),a.Zb(7,"li",7),a.Zb(8,"a",8),a.Vb(9,"i",9),a.Yb(),a.Yb(),a.Zb(10,"li",10),a.Fc(11,"User Registration"),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Zb(12,"div",11),a.Zb(13,"div",12),a.Zb(14,"div",13),a.Zb(15,"div",14),a.Zb(16,"div",15),a.Zb(17,"div",16),a.Zb(18,"div",17),a.Zb(19,"h3",18),a.Fc(20,"User Details"),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Ec(21,p,4,1,"div",19),a.Ec(22,g,4,1,"div",19),a.Zb(23,"form",20),a.hc("ngSubmit",(function(e){return t.submit(t.form.value)})),a.Zb(24,"div",21),a.Zb(25,"label",22),a.Fc(26,"User Name"),a.Yb(),a.Zb(27,"div",23),a.Vb(28,"input",24),a.Ec(29,Y,2,1,"div",25),a.Yb(),a.Ec(30,Z,1,0,"input",26),a.Ec(31,w,2,0,"label",27),a.Yb(),a.Zb(32,"div",21),a.Zb(33,"label",28),a.Fc(34,"Email"),a.Yb(),a.Zb(35,"div",23),a.Vb(36,"input",29),a.Ec(37,F,3,2,"div",25),a.Yb(),a.Yb(),a.Zb(38,"div",21),a.Zb(39,"label",30),a.Fc(40,"Role"),a.Yb(),a.Zb(41,"div",23),a.Vb(42,"input",31),a.Zb(43,"mat-autocomplete",32,33),a.Ec(45,L,7,4,"mat-option",34),a.Yb(),a.Yb(),a.Yb(),a.Zb(46,"div",35),a.Zb(47,"div",36),a.Zb(48,"button",37),a.Fc(49," Save "),a.Ec(50,x,1,0,"div",38),a.Yb(),a.Zb(51,"a",39),a.Fc(52,"Back"),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Vb(53,"app-footer")),2&e){const e=a.xc(44);a.Jb(21),a.qc("ngIf",t.errorMessage),a.Jb(1),a.qc("ngIf",t.successMessage),a.Jb(1),a.qc("formGroup",t.form),a.Jb(5),a.Kb("disabled",!!t.isEdit||null),a.Jb(1),a.qc("ngIf",t.form.controls.username.invalid&&(t.form.controls.username.dirty||t.form.controls.username.touched)),a.Jb(1),a.qc("ngIf",t.isEdit),a.Jb(1),a.qc("ngIf",t.isEdit),a.Jb(6),a.qc("ngIf",t.form.controls.email.invalid&&(t.form.controls.email.dirty||t.form.controls.email.touched)),a.Jb(5),a.qc("matAutocomplete",e),a.Jb(1),a.qc("displayWith",t.displayFn),a.Jb(2),a.qc("ngForOf",t.options),a.Jb(3),a.qc("disabled",t.isSubmitted),a.Jb(2),a.qc("ngIf",t.isLoader)}},directives:[c.i,r.l,s.y,s.p,s.i,s.c,s.o,s.g,d.b,u.c,u.a,r.k,m.a,s.a,f.i,h.a],styles:[".fontweight[_ngcontent-%COMP%]{font-weight:400;padding-top:7px}.input[_ngcontent-%COMP%]{border:2px solid grey;border-radius:5px;padding-left:5px;height:40px;width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding:0;border-bottom:1px solid #ddd}"]}),e})();var E=i("qFpe"),I=i("jhN1"),S=i("oOf3"),q=i("ifrw");function R(e,t){1&e&&a.Vb(0,"div",26)}function P(e,t){if(1&e){const e=a.ac();a.Zb(0,"tr"),a.Zb(1,"th",33),a.Fc(2),a.Yb(),a.Zb(3,"td",34),a.Fc(4),a.Yb(),a.Zb(5,"td",34),a.Fc(6),a.Yb(),a.Zb(7,"td",34),a.Fc(8),a.Yb(),a.Zb(9,"td"),a.Zb(10,"a",35),a.Vb(11,"i",36),a.Yb(),a.Zb(12,"a",37),a.hc("click",(function(i){a.yc(e);const r=t.$implicit;return a.lc(3).resetPassword(r)})),a.Vb(13,"i",38),a.Yb(),a.Yb(),a.Yb()}if(2&e){const e=t.$implicit,i=t.index;a.Jb(2),a.Gc(i+1),a.Jb(2),a.Gc(null==e?null:e.username),a.Jb(2),a.Gc(null==e?null:e.RoleDisplay),a.Jb(2),a.Gc(null==e?null:e.email),a.Jb(2),a.qc("state",e)}}const U=function(e,t,i){return{itemsPerPage:e,currentPage:t,totalItems:i}};function C(e,t){if(1&e&&(a.Xb(0),a.Ec(1,P,14,5,"tr",32),a.mc(2,"paginate"),a.mc(3,"searchData"),a.Wb()),2&e){const e=a.lc(2);a.Jb(1),a.qc("ngForOf",a.nc(2,1,a.nc(3,4,e.userList,e.filter),a.vc(7,U,e.itemsPerPage,e.currentPage,e.totalCount)))}}function O(e,t){1&e&&(a.Xb(0),a.Zb(1,"tr"),a.Zb(2,"td",39),a.Zb(3,"div",40),a.Fc(4,"User List is unavailable."),a.Yb(),a.Yb(),a.Yb(),a.Wb())}function N(e,t){if(1&e){const e=a.ac();a.Zb(0,"div",41),a.Zb(1,"pagination-controls",42),a.hc("pageChange",(function(t){return a.yc(e),a.lc(2).userPagination(t)})),a.Yb(),a.Yb()}}function V(e,t){if(1&e&&(a.Xb(0),a.Zb(1,"div",27),a.Zb(2,"table",28),a.Zb(3,"thead",29),a.Zb(4,"tr"),a.Zb(5,"th",30),a.Fc(6,"S.No."),a.Yb(),a.Zb(7,"th",30),a.Fc(8,"User Name"),a.Yb(),a.Zb(9,"th",30),a.Fc(10,"Roles"),a.Yb(),a.Zb(11,"th",30),a.Fc(12,"Email"),a.Yb(),a.Vb(13,"th",30),a.Yb(),a.Yb(),a.Zb(14,"tbody"),a.Ec(15,C,4,11,"ng-container",25),a.Ec(16,O,5,0,"ng-container",25),a.mc(17,"searchData"),a.Yb(),a.Yb(),a.Yb(),a.Ec(18,N,2,0,"div",31),a.mc(19,"searchData"),a.Wb()),2&e){const e=a.lc();a.Jb(15),a.qc("ngIf",e.userList&&e.userList.length>0),a.Jb(1),a.qc("ngIf",e.userList&&0===a.nc(17,3,e.userList,e.filter).length),a.Jb(2),a.qc("ngIf",e.userList&&a.nc(19,6,e.userList,e.filter).length>e.itemsPerPage)}}let M=(()=>{class e{constructor(e,t,i,r){this.scrollHelper=e,this.userService=t,this.snackBarService=i,this.title=r,this.isLoader=!0,this.itemsPerPage=10,this.currentPage=1,this.limit=20,this.offset=0,this.title.setTitle("User List | License Management System")}ngOnInit(){this.getInformation(0)}getInformation(e){this.userService.getUsers().subscribe(e=>{this.isLoader=!1,console.log(e),this.allUserList=e&&e.result?e.result:[],this.allUserList.forEach(e=>{e.IsNew=!0,e.roles.forEach((t,i)=>{0===i?e.RoleDisplay=t.Role:e.RoleDisplay+=", "+t.Role})}),this.onCheckboxChange(!1)},e=>{this.isLoader=!1,this.totalCount=0,this.itemsPerPage=20,this.userList=[]})}userPagination(e){this.isLoader=!0,this.currentPage=e;const t=this;window.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{t.isLoader=!1},500)}deleteLicence(e){this.selectedLicence=e}selectionChanged(e){this.getInformation(e.target.value)}resetPassword(e){confirm(`Do you want to reset password for ${e.username}`)&&this.userService.resetPassword(e.username).subscribe(e=>{this.snackBarService.openSnackBar({type:"success",message:`Password reset successfull. Temp Password : ${e.result}`}),this.getInformation(null)},e=>{this.snackBarService.openSnackBar({type:"danger",message:e.error.message?e.error.message:JSON.stringify(e.error)})})}onCheckboxChange(e){this.userList=e?this.allUserList:this.allUserList.filter(e=>!e.Disabled)}}return e.\u0275fac=function(t){return new(t||e)(a.Ub(E.a),a.Ub(l.a),a.Ub(b.a),a.Ub(I.c))},e.\u0275cmp=a.Ob({type:e,selectors:[["app-user-list"]],decls:30,vars:3,consts:[[1,"header","bg-gradient-primary","pb-6","pt-4","pt-md-6"],[1,"container-fluid"],[1,"header-body"],[1,"row"],[1,"col-xl-12","col-lg-12","pb-3","pt-3"],["aria-label","breadcrumb",1,"nav-breadcrumb"],[1,"breadcrumb","mb-0"],[1,"breadcrumb-item"],["routerLink","/dashboard"],[1,"ni","ni-tv-2"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid","mt--7"],[1,"row","mt-5"],[1,"col-xl-12"],[1,"card","shadow"],[1,"card-header","border-0"],[1,"row","align-items-center"],[1,"row","col-12","col-md-7","col-lg-7"],["routerLink","/user/user-register/",1,"btn","btn-primary","d-flex"],[1,"row",2,"margin-left","20px","margin-top","8px"],["id","chkDisabled","type","checkbox",1,"form-check-input",3,"change"],["for","chkDisabled"],[1,"col-12","col-md-5","col-lg-5","text-right"],["type","search","placeholder","Search...","name","filter",1,"form-control",3,"ngModel","ngModelChange"],["class","preloader lms_loader",4,"ngIf"],[4,"ngIf"],[1,"preloader","lms_loader"],[1,"table-responsive","mb-3"],[1,"table","align-items-center","table-flush"],[1,"thead-light"],["scope","col"],["class","pagination",4,"ngIf"],[4,"ngFor","ngForOf"],["scope","row"],[1,"text-capitalize"],["routerLink","/user/update",1,"text-info","mr-3",2,"margin-right","10px",3,"state"],[1,"fa","fa-edit"],[1,"text-info","mr-3",2,"margin-right","10px",3,"click"],[1,"fa","fa-key"],["colspan","8"],[1,"font-weight-bold"],[1,"pagination"],[3,"pageChange"]],template:function(e,t){1&e&&(a.Zb(0,"div",0),a.Zb(1,"div",1),a.Zb(2,"div",2),a.Zb(3,"div",3),a.Zb(4,"div",4),a.Zb(5,"nav",5),a.Zb(6,"ol",6),a.Zb(7,"li",7),a.Zb(8,"a",8),a.Vb(9,"i",9),a.Yb(),a.Yb(),a.Zb(10,"li",10),a.Fc(11,"User List"),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Zb(12,"div",11),a.Zb(13,"div",12),a.Zb(14,"div",13),a.Zb(15,"div",14),a.Zb(16,"div",15),a.Zb(17,"div",16),a.Zb(18,"div",17),a.Zb(19,"button",18),a.Fc(20,"New User"),a.Yb(),a.Zb(21,"div",19),a.Zb(22,"input",20),a.hc("change",(function(e){return t.onCheckboxChange(e.target.checked)})),a.Yb(),a.Zb(23,"label",21),a.Fc(24,"Show Disabled Users"),a.Yb(),a.Yb(),a.Yb(),a.Zb(25,"div",22),a.Zb(26,"input",23),a.hc("ngModelChange",(function(e){return t.filter=e})),a.Yb(),a.Yb(),a.Yb(),a.Yb(),a.Ec(27,R,1,0,"div",24),a.Ec(28,V,20,9,"ng-container",25),a.Yb(),a.Yb(),a.Yb(),a.Vb(29,"app-footer"),a.Yb()),2&e&&(a.Jb(26),a.qc("ngModel",t.filter),a.Jb(1),a.qc("ngIf",t.isLoader),a.Jb(1),a.qc("ngIf",!t.isLoader))},directives:[c.i,c.g,s.c,s.o,s.r,r.l,m.a,r.k,S.c],pipes:[q.a,S.b],styles:[""]}),e})();var D=i("OPNc");const G=[{path:"",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Ob({type:e,selectors:[["app-users"]],decls:2,vars:0,template:function(e,t){1&e&&(a.Vb(0,"app-header"),a.Vb(1,"router-outlet"))},directives:[D.a,c.k],encapsulation:2}),e})(),children:[{path:"userList",component:M},{path:"user-register",component:J},{path:"update",component:J}]}];let A=(()=>{class e{}return e.\u0275mod=a.Sb({type:e}),e.\u0275inj=a.Rb({factory:function(t){return new(t||e)},imports:[[c.j.forChild(G)],c.j]}),e})();var B=i("5wG6");i.d(t,"UsersModule",(function(){return $}));let $=(()=>{class e{}return e.\u0275mod=a.Sb({type:e}),e.\u0275inj=a.Rb({factory:function(t){return new(t||e)},imports:[[r.b,B.a,A,s.k,s.u,o.c,d.c,u.b,h.b]]}),e})()}}]);