function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{BJHQ:function(e,t,i){"use strict";i.r(t);var r=i("ofXK"),n=i("3Pt+"),o=i("0IaG"),s=i("tyNb"),a=i("lJxs"),c=i("fXoL"),l=i("f4AX"),b=i("DPn5"),u=i("qFsG"),d=i("/1cH"),f=i("iIrt"),m=i("FKr1"),p=i("bSwM");function h(e,t){if(1&e&&(c.Zb(0,"div",3),c.Zb(1,"div",45),c.Zb(2,"div",46),c.Gc(3),c.Yb(),c.Yb(),c.Yb()),2&e){var i=c.lc();c.Jb(3),c.Hc(i.errorMessage)}}function g(e,t){if(1&e&&(c.Zb(0,"div",3),c.Zb(1,"div",45),c.Zb(2,"div",47),c.Gc(3),c.Yb(),c.Yb(),c.Yb()),2&e){var i=c.lc();c.Jb(3),c.Hc(i.successMessage)}}function v(e,t){1&e&&(c.Zb(0,"small"),c.Gc(1,"User Name is required."),c.Yb())}function Y(e,t){if(1&e&&(c.Zb(0,"div",48),c.Fc(1,v,2,0,"small",49),c.Yb()),2&e){var i=c.lc();c.Jb(1),c.qc("ngIf",i.form.controls.username.errors.required)}}function Z(e,t){1&e&&c.Vb(0,"input",50)}function y(e,t){1&e&&(c.Zb(0,"label",51),c.Gc(1,"Disabled"),c.Yb())}function k(e,t){1&e&&(c.Zb(0,"small"),c.Gc(1,"Email is required."),c.Yb())}function w(e,t){1&e&&(c.Zb(0,"small"),c.Gc(1,"Invalid Email address."),c.Yb())}function L(e,t){if(1&e&&(c.Zb(0,"div",48),c.Fc(1,k,2,0,"small",49),c.Fc(2,w,2,0,"small",49),c.Yb()),2&e){var i=c.lc();c.Jb(1),c.qc("ngIf",i.form.controls.email.errors.required),c.Jb(1),c.qc("ngIf",i.form.controls.email.errors.email)}}function C(e,t){if(1&e){var i=c.ac();c.Zb(0,"mat-option",52),c.Zb(1,"div",53),c.hc("click",(function(e){c.zc(i);var r=t.$implicit;return c.lc().optionClicked(e,r)})),c.Zb(2,"mat-checkbox",54),c.hc("change",(function(e){c.zc(i);var r=t.$implicit;return c.lc().toggleSelection(r)}))("click",(function(e){return c.zc(i),e.stopPropagation()})),c.Zb(3,"h4"),c.Gc(4),c.Yb(),c.Yb(),c.Zb(5,"p",55),c.Gc(6),c.Yb(),c.Yb(),c.Yb()}if(2&e){var r=t.$implicit,n=c.lc();c.qc("value",n.selectedRoles),c.Jb(2),c.qc("checked",r.selected),c.Jb(2),c.Hc(r.Role),c.Jb(2),c.Hc(r.Description)}}function x(e,t){1&e&&c.Vb(0,"div",56)}var J,I=((J=function(){function e(t,i,r,o,s){_classCallCheck(this,e),this.fb=t,this.userService=i,this.snackBarService=r,this.route=o,this.router=s,this.selectedRoles=new Array,this.role=new n.e,this.isSubmitting=!1,this.isSubmitted=!1,this.isLoader=!1,this.isEdit=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.forminit()}},{key:"forminit",value:function(){this.form=this.fb.group({username:["",[n.w.required]],email:["",[n.w.required,n.w.email]],disabled:[!1],roles:[""],authLevel:[0]}),this.options=[],this.getRoles()}},{key:"getRoles",value:function(){var e=this;this.userService.getRoles().subscribe((function(t){e.options=t&&t.result?t.result:[],e.loadValues(),console.log(e.isEdit)}),(function(e){}))}},{key:"loadValues",value:function(){var e=this;this.route.paramMap.pipe(Object(a.a)((function(){return window.history.state}))).subscribe((function(t){t.username&&(e.options.forEach((function(i){t.roles.map((function(e){return e.Role})).indexOf(i.Role)>=0&&(i.selected=!0,e.selectedRoles.push(i))})),e.form.patchValue({username:t.username,email:t.email,roles:e.selectedRoles,disabled:t.Disabled,authLevel:t.AuthLevel}),e.isEdit=!0)}))}},{key:"submit",value:function(e){var t=this;this.form.valid?(this.isSubmitted=!0,this.isLoader=!0,(this.isEdit?this.userService.updateUser(e):this.userService.registerUser(e)).subscribe((function(e){t.isSubmitted=!1,t.isLoader=!1,t.resetForm(),t.router.navigate(["/user/userList"]),t.snackBarService.openSnackBar({type:"success",message:e&&e.message?e.message:"Registration Successfull"})}),(function(e){t.isSubmitted=!1,t.isLoader=!1,e&&e.error&&(t.errorMessage=e.error.message?e.error.message:JSON.stringify(e.error));var i=t;setTimeout((function(){i.errorMessage=void 0}),5e3)}))):this.isSubmitting=!0}},{key:"resetForm",value:function(){this.form.reset()}},{key:"displayFn",value:function(e){var t;return Array.isArray(e)?e.forEach((function(e,i){0===i?t=e.Role:t+=", "+e.Role})):t=e,console.log(t,e,Array.isArray(e)),t}},{key:"toggleSelection",value:function(e){if(console.log(e),e.selected=!e.selected,e.selected)this.selectedRoles.push(e);else{var t=this.selectedRoles.findIndex((function(t){return t.Role===e.Role}));this.selectedRoles.splice(t,1)}this.form.controls.roles.setValue(this.selectedRoles)}},{key:"optionClicked",value:function(e,t){e.stopPropagation(),this.toggleSelection(t)}}]),e}()).\u0275fac=function(e){return new(e||J)(c.Ub(n.d),c.Ub(l.a),c.Ub(b.a),c.Ub(s.a),c.Ub(s.f))},J.\u0275cmp=c.Ob({type:J,selectors:[["app-user-register"]],decls:67,vars:13,consts:[[1,"header","bg-gradient-primary","pb-6","pt-4","pt-md-6"],[1,"container-fluid"],[1,"header-body"],[1,"row"],[1,"col-xl-12","col-lg-12","pb-3","pt-3"],["aria-label","breadcrumb",1,"nav-breadcrumb"],[1,"breadcrumb","mb-0"],[1,"breadcrumb-item"],["routerLink","/dashboard"],[1,"ni","ni-tv-2"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid","mt--7"],[1,"row","mt-5"],[1,"col-xl-12"],[1,"card","shadow"],[1,"card-header","border-0"],[1,"row","align-items-center"],[1,"col"],[1,"mb-0"],["class","row",4,"ngIf"],["autocomplete","off",1,"form-horizontal","form-material",2,"padding-left","20px",3,"formGroup","ngSubmit"],[1,"form-group","row","pt-2"],["for","userName",1,"col-md-2","fontweight"],[1,"col-md-4"],["type","text","placeholder","Enter User Name","id","userName","formControlName","username",1,"input"],["class","invalid-feedback d-block",4,"ngIf"],["id","disabled","type","checkbox","formControlName","disabled",4,"ngIf"],["for","disabled","class","col-md-2 fontweight",4,"ngIf"],["for","userEmail",1,"col-md-2","fontweight"],["type","text","placeholder","Enter Email Address","id","userEmail","formControlName","email",1,"input"],["id","authLevel","formControlName","authLevel",1,"input"],["value","0"],["value","1"],["value","2"],["value","3"],["for","userRole",1,"col-md-2","fontweight"],["type","text","placeholder","Enter Role","id","userRole","onkeydown","return false","formControlName","roles","matInput","",1,"input",3,"matAutocomplete"],[3,"displayWith"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[1,"form-group","row"],[1,"col-sm-12"],["type","submit",1,"btn","btn-success",2,"width","70px","margin-right","15px",3,"disabled"],["class","postloader",4,"ngIf"],["routerLink","/user/userList",1,"btn","btn-info"],[1,"col-12"],[1,"alert","alert-danger"],[1,"alert","alert-success"],[1,"invalid-feedback","d-block"],[4,"ngIf"],["id","disabled","type","checkbox","formControlName","disabled"],["for","disabled",1,"col-md-2","fontweight"],[3,"value"],[3,"click"],[3,"checked","change","click"],[2,"font-style","italic","font-size","small","margin-left","25px","margin-top","-20px"],[1,"postloader"]],template:function(e,t){if(1&e&&(c.Zb(0,"div",0),c.Zb(1,"div",1),c.Zb(2,"div",2),c.Zb(3,"div",3),c.Zb(4,"div",4),c.Zb(5,"nav",5),c.Zb(6,"ol",6),c.Zb(7,"li",7),c.Zb(8,"a",8),c.Vb(9,"i",9),c.Yb(),c.Yb(),c.Zb(10,"li",10),c.Gc(11,"User Registration"),c.Yb(),c.Yb(),c.Yb(),c.Yb(),c.Yb(),c.Yb(),c.Yb(),c.Yb(),c.Zb(12,"div",11),c.Zb(13,"div",12),c.Zb(14,"div",13),c.Zb(15,"div",14),c.Zb(16,"div",15),c.Zb(17,"div",16),c.Zb(18,"div",17),c.Zb(19,"h3",18),c.Gc(20,"User Details"),c.Yb(),c.Yb(),c.Yb(),c.Yb(),c.Fc(21,h,4,1,"div",19),c.Fc(22,g,4,1,"div",19),c.Zb(23,"form",20),c.hc("ngSubmit",(function(e){return t.submit(t.form.value)})),c.Zb(24,"div",21),c.Zb(25,"label",22),c.Gc(26,"User Name"),c.Yb(),c.Zb(27,"div",23),c.Vb(28,"input",24),c.Fc(29,Y,2,1,"div",25),c.Yb(),c.Fc(30,Z,1,0,"input",26),c.Fc(31,y,2,0,"label",27),c.Yb(),c.Zb(32,"div",21),c.Zb(33,"label",28),c.Gc(34,"Email"),c.Yb(),c.Zb(35,"div",23),c.Vb(36,"input",29),c.Fc(37,L,3,2,"div",25),c.Yb(),c.Yb(),c.Zb(38,"div",21),c.Zb(39,"label",28),c.Gc(40,"Authorization Level"),c.Yb(),c.Zb(41,"div",23),c.Zb(42,"select",30),c.Zb(43,"option",31),c.Gc(44,"No Authorization"),c.Yb(),c.Zb(45,"option",32),c.Gc(46,"Level 1"),c.Yb(),c.Zb(47,"option",33),c.Gc(48,"Level 2"),c.Yb(),c.Zb(49,"option",34),c.Gc(50,"Level 3"),c.Yb(),c.Yb(),c.Yb(),c.Yb(),c.Zb(51,"div",21),c.Zb(52,"label",35),c.Gc(53,"Role"),c.Yb(),c.Zb(54,"div",23),c.Vb(55,"input",36),c.Zb(56,"mat-autocomplete",37,38),c.Fc(58,C,7,4,"mat-option",39),c.Yb(),c.Yb(),c.Yb(),c.Zb(59,"div",40),c.Zb(60,"div",41),c.Zb(61,"button",42),c.Gc(62," Save "),c.Fc(63,x,1,0,"div",43),c.Yb(),c.Zb(64,"a",44),c.Gc(65,"Back"),c.Yb(),c.Yb(),c.Yb(),c.Yb(),c.Yb(),c.Yb(),c.Yb(),c.Yb(),c.Vb(66,"app-footer")),2&e){var i=c.yc(57);c.Jb(21),c.qc("ngIf",t.errorMessage),c.Jb(1),c.qc("ngIf",t.successMessage),c.Jb(1),c.qc("formGroup",t.form),c.Jb(5),c.Kb("disabled",!!t.isEdit||null),c.Jb(1),c.qc("ngIf",t.form.controls.username.invalid&&(t.form.controls.username.dirty||t.form.controls.username.touched)),c.Jb(1),c.qc("ngIf",t.isEdit),c.Jb(1),c.qc("ngIf",t.isEdit),c.Jb(6),c.qc("ngIf",t.form.controls.email.invalid&&(t.form.controls.email.dirty||t.form.controls.email.touched)),c.Jb(18),c.qc("matAutocomplete",i),c.Jb(1),c.qc("displayWith",t.displayFn),c.Jb(2),c.qc("ngForOf",t.options),c.Jb(3),c.qc("disabled",t.isSubmitted),c.Jb(2),c.qc("ngIf",t.isLoader)}},directives:[s.i,r.l,n.y,n.p,n.i,n.c,n.o,n.g,n.v,n.s,n.x,u.b,d.c,d.a,r.k,f.a,n.a,m.i,p.a],styles:[".fontweight[_ngcontent-%COMP%]{font-weight:400;padding-top:7px}.input[_ngcontent-%COMP%]{border:2px solid grey;border-radius:5px;padding-left:5px;height:40px;width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding:0;border-bottom:1px solid #ddd}"]}),J),S=i("qFpe"),G=i("jhN1"),P=i("oOf3"),q=i("ifrw");function R(e,t){1&e&&c.Vb(0,"div",26)}function F(e,t){if(1&e){var i=c.ac();c.Zb(0,"tr"),c.Zb(1,"th",33),c.Gc(2),c.Yb(),c.Zb(3,"td",34),c.Gc(4),c.Yb(),c.Zb(5,"td",34),c.Gc(6),c.Yb(),c.Zb(7,"td",34),c.Gc(8),c.Yb(),c.Zb(9,"td"),c.Zb(10,"a",35),c.Vb(11,"i",36),c.Yb(),c.Zb(12,"a",37),c.hc("click",(function(e){c.zc(i);var r=t.$implicit;return c.lc(3).resetPassword(r)})),c.Vb(13,"i",38),c.Yb(),c.Yb(),c.Yb()}if(2&e){var r=t.$implicit,n=t.index;c.Jb(2),c.Hc(n+1),c.Jb(2),c.Hc(null==r?null:r.username),c.Jb(2),c.Hc(null==r?null:r.RoleDisplay),c.Jb(2),c.Hc(null==r?null:r.email),c.Jb(2),c.qc("state",r)}}var U=function(e,t,i){return{itemsPerPage:e,currentPage:t,totalItems:i}};function E(e,t){if(1&e&&(c.Xb(0),c.Fc(1,F,14,5,"tr",32),c.mc(2,"paginate"),c.mc(3,"searchData"),c.Wb()),2&e){var i=c.lc(2);c.Jb(1),c.qc("ngForOf",c.nc(2,1,c.nc(3,4,i.userList,i.filter),c.wc(7,U,i.itemsPerPage,i.currentPage,i.totalCount)))}}function N(e,t){1&e&&(c.Xb(0),c.Zb(1,"tr"),c.Zb(2,"td",39),c.Zb(3,"div",40),c.Gc(4,"User List is unavailable."),c.Yb(),c.Yb(),c.Yb(),c.Wb())}function O(e,t){if(1&e){var i=c.ac();c.Zb(0,"div",41),c.Zb(1,"pagination-controls",42),c.hc("pageChange",(function(e){return c.zc(i),c.lc(2).userPagination(e)})),c.Yb(),c.Yb()}}function V(e,t){if(1&e&&(c.Xb(0),c.Zb(1,"div",27),c.Zb(2,"table",28),c.Zb(3,"thead",29),c.Zb(4,"tr"),c.Zb(5,"th",30),c.Gc(6,"S.No."),c.Yb(),c.Zb(7,"th",30),c.Gc(8,"User Name"),c.Yb(),c.Zb(9,"th",30),c.Gc(10,"Roles"),c.Yb(),c.Zb(11,"th",30),c.Gc(12,"Email"),c.Yb(),c.Vb(13,"th",30),c.Yb(),c.Yb(),c.Zb(14,"tbody"),c.Fc(15,E,4,11,"ng-container",25),c.Fc(16,N,5,0,"ng-container",25),c.mc(17,"searchData"),c.Yb(),c.Yb(),c.Yb(),c.Fc(18,O,2,0,"div",31),c.mc(19,"searchData"),c.Wb()),2&e){var i=c.lc();c.Jb(15),c.qc("ngIf",i.userList&&i.userList.length>0),c.Jb(1),c.qc("ngIf",i.userList&&0===c.nc(17,3,i.userList,i.filter).length),c.Jb(2),c.qc("ngIf",i.userList&&c.nc(19,6,i.userList,i.filter).length>i.itemsPerPage)}}var _,M,D,A=((_=function(){function e(t,i,r,n){_classCallCheck(this,e),this.scrollHelper=t,this.userService=i,this.snackBarService=r,this.title=n,this.isLoader=!0,this.itemsPerPage=10,this.currentPage=1,this.limit=20,this.offset=0,this.title.setTitle("User List | License Management System")}return _createClass(e,[{key:"ngOnInit",value:function(){this.getInformation(0)}},{key:"getInformation",value:function(e){var t=this;this.userService.getUsers().subscribe((function(e){t.isLoader=!1,console.log(e),t.allUserList=e&&e.result?e.result:[],t.allUserList.forEach((function(e){e.IsNew=!0,e.roles.forEach((function(t,i){0===i?e.RoleDisplay=t.Role:e.RoleDisplay+=", "+t.Role}))})),t.onCheckboxChange(!1)}),(function(e){t.isLoader=!1,t.totalCount=0,t.itemsPerPage=20,t.userList=[]}))}},{key:"userPagination",value:function(e){this.isLoader=!0,this.currentPage=e;var t=this;window.scrollTo({top:0,behavior:"smooth"}),setTimeout((function(){t.isLoader=!1}),500)}},{key:"deleteLicence",value:function(e){this.selectedLicence=e}},{key:"selectionChanged",value:function(e){this.getInformation(e.target.value)}},{key:"resetPassword",value:function(e){var t=this;confirm("Do you want to reset password for ".concat(e.username))&&this.userService.resetPassword(e.username).subscribe((function(e){t.snackBarService.openSnackBar({type:"success",message:"Password reset successfull. Temp Password : ".concat(e.result)}),t.getInformation(null)}),(function(e){t.snackBarService.openSnackBar({type:"danger",message:e.error.message?e.error.message:JSON.stringify(e.error)})}))}},{key:"onCheckboxChange",value:function(e){this.userList=e?this.allUserList:this.allUserList.filter((function(e){return!e.Disabled}))}}]),e}()).\u0275fac=function(e){return new(e||_)(c.Ub(S.a),c.Ub(l.a),c.Ub(b.a),c.Ub(G.c))},_.\u0275cmp=c.Ob({type:_,selectors:[["app-user-list"]],decls:30,vars:3,consts:[[1,"header","bg-gradient-primary","pb-6","pt-4","pt-md-6"],[1,"container-fluid"],[1,"header-body"],[1,"row"],[1,"col-xl-12","col-lg-12","pb-3","pt-3"],["aria-label","breadcrumb",1,"nav-breadcrumb"],[1,"breadcrumb","mb-0"],[1,"breadcrumb-item"],["routerLink","/dashboard"],[1,"ni","ni-tv-2"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid","mt--7"],[1,"row","mt-5"],[1,"col-xl-12"],[1,"card","shadow"],[1,"card-header","border-0"],[1,"row","align-items-center"],[1,"row","col-12","col-md-7","col-lg-7"],["routerLink","/user/user-register/",1,"btn","btn-primary","d-flex"],[1,"row",2,"margin-left","20px","margin-top","8px"],["id","chkDisabled","type","checkbox",1,"form-check-input",3,"change"],["for","chkDisabled"],[1,"col-12","col-md-5","col-lg-5","text-right"],["type","search","placeholder","Search...","name","filter",1,"form-control",3,"ngModel","ngModelChange"],["class","preloader lms_loader",4,"ngIf"],[4,"ngIf"],[1,"preloader","lms_loader"],[1,"table-responsive","mb-3"],[1,"table","align-items-center","table-flush"],[1,"thead-light"],["scope","col"],["class","pagination",4,"ngIf"],[4,"ngFor","ngForOf"],["scope","row"],[1,"text-capitalize"],["routerLink","/user/update",1,"text-info","mr-3",2,"margin-right","10px",3,"state"],[1,"fa","fa-edit"],[1,"text-info","mr-3",2,"margin-right","10px",3,"click"],[1,"fa","fa-key"],["colspan","8"],[1,"font-weight-bold"],[1,"pagination"],[3,"pageChange"]],template:function(e,t){1&e&&(c.Zb(0,"div",0),c.Zb(1,"div",1),c.Zb(2,"div",2),c.Zb(3,"div",3),c.Zb(4,"div",4),c.Zb(5,"nav",5),c.Zb(6,"ol",6),c.Zb(7,"li",7),c.Zb(8,"a",8),c.Vb(9,"i",9),c.Yb(),c.Yb(),c.Zb(10,"li",10),c.Gc(11,"User List"),c.Yb(),c.Yb(),c.Yb(),c.Yb(),c.Yb(),c.Yb(),c.Yb(),c.Yb(),c.Zb(12,"div",11),c.Zb(13,"div",12),c.Zb(14,"div",13),c.Zb(15,"div",14),c.Zb(16,"div",15),c.Zb(17,"div",16),c.Zb(18,"div",17),c.Zb(19,"button",18),c.Gc(20,"New User"),c.Yb(),c.Zb(21,"div",19),c.Zb(22,"input",20),c.hc("change",(function(e){return t.onCheckboxChange(e.target.checked)})),c.Yb(),c.Zb(23,"label",21),c.Gc(24,"Show Disabled Users"),c.Yb(),c.Yb(),c.Yb(),c.Zb(25,"div",22),c.Zb(26,"input",23),c.hc("ngModelChange",(function(e){return t.filter=e})),c.Yb(),c.Yb(),c.Yb(),c.Yb(),c.Fc(27,R,1,0,"div",24),c.Fc(28,V,20,9,"ng-container",25),c.Yb(),c.Yb(),c.Yb(),c.Vb(29,"app-footer"),c.Yb()),2&e&&(c.Jb(26),c.qc("ngModel",t.filter),c.Jb(1),c.qc("ngIf",t.isLoader),c.Jb(1),c.qc("ngIf",!t.isLoader))},directives:[s.i,s.g,n.c,n.o,n.r,r.l,f.a,r.k,P.c],pipes:[q.a,P.b],styles:[""]}),_),H=i("OPNc"),z=[{path:"",component:(M=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}(),M.\u0275fac=function(e){return new(e||M)},M.\u0275cmp=c.Ob({type:M,selectors:[["app-users"]],decls:2,vars:0,template:function(e,t){1&e&&(c.Vb(0,"app-header"),c.Vb(1,"router-outlet"))},directives:[H.a,s.k],encapsulation:2}),M),children:[{path:"userList",component:A},{path:"user-register",component:I},{path:"update",component:I}]}],B=((D=function e(){_classCallCheck(this,e)}).\u0275mod=c.Sb({type:D}),D.\u0275inj=c.Rb({factory:function(e){return new(e||D)},imports:[[s.j.forChild(z)],s.j]}),D),j=i("5wG6");i.d(t,"UsersModule",(function(){return X}));var T,X=((T=function e(){_classCallCheck(this,e)}).\u0275mod=c.Sb({type:T}),T.\u0275inj=c.Rb({factory:function(e){return new(e||T)},imports:[[r.b,j.a,B,n.k,n.u,o.c,u.c,d.b,p.b]]}),T)}}]);